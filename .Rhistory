exp_tables_spearman_boot_simdat <- readRDS("testdata/exp_tables_spearman_boot_simdat.rds")
exp_tables_auto99_boot_simdat <- readRDS("testdata/exp_tables_auto99_boot_simdat.rds")
exp_matrices_jackknife_simdat <- readRDS("testdata/exp_matrices_jackknife_simdat.rds")
# on my simulated data
data("simdat_intensive_longitudinal")
exp_tables_pearson_simdat <- readRDS("testdata/exp_tables_pearson_simdat.rds")
exp_matrices_pearson_simdat <- readRDS("testdata/exp_matrices_pearson_simdat.rds")
exp_tables_spearman_boot_simdat
cors <- suppressWarnings(wbCorr(simdat_intensive_longitudinal,
cluster = 'participantID',
method = 'auto',
boot = TRUE))
get_table(cors)
get_table(cors)
exp_tables_auto_boot_real <- readRDS("testdata/exp_tables_auto_boot_real.rds")
d
library('wbCorr')
a <- wbCorr(df, df$CoupleID, method = 'spearman-jackknife')
test_data_real_factors <- readRDS("C:/Users/pascku/OneDrive/scripts/01 R-Packages/within-between-correlations/test_data_real_factors.rds")
df <- test_data_real_factors
a <- wbCorr(df, df$CoupleID, method = 'spearman-jackknife')
a <- wbCorr(df, df$CoupleID, method = 'spearman-jackknife')
library(wbCorr)
df
a <- wbCorr(df, df$CoupleID, method = 'spearman-jackknife')
library(wbCorr)
a <- wbCorr(df, df$CoupleID, method = 'spearman-jackknife')
library(wbCorr)
a <- wbCorr(df, df$CoupleID, method = 'spearman-jackknife')
library(wbCorr)
a <- wbCorr(df, df$CoupleID, method = 'spearman-jackknife')
a
a <- wbCorr(df, df$CoupleID, method = 'spearman', bootstrap = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, method = 'spearman', bootstrap = TRUE)
test_data_real_factors <- readRDS("C:/Users/pascku/OneDrive/scripts/01 R-Packages/within-between-correlations/test_data_real_factors.rds")
df <- test_data_real_factors
a <- wbCorr(df, df$CoupleID, method = 'spearman', bootstrap = TRUE)
a
a <- wbCorr(df, df$CoupleID, method = 'spearman', bootstrap = TRUE)
a
library(wbCorr)
a <- wbCorr(df, df$CoupleID, method = 'spearman', bootstrap = FALSE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, method = 'spearman', bootstrap = FALSE)
a
library(wbCorr)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, method = 'spearman', bootstrap = FALSE)
a
get_tables(a)
summary(a)
a@within$correlations
a@between$p_values
a@between$confidence_intervals
library(wbCorr)
a <- wbCorr(df, df$CoupleID, method = 'spearman', bootstrap = FALSE)
a
a <- wbCorr(df, df$CoupleID, method = 'spearman', bootstrap = TRUE)
a <- wbCorr(df, df$CoupleID, method = 'spearman', bootstrap = TRUE)
a <- wbCorr(df, df$CoupleID, method = 'spearman', bootstrap = FALSE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, method = 'spearman', bootstrap = TRUE)
library(wbCorr)
library(wbCorr)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, method = 'spearman', bootstrap = FALSE)
a
a <- wbCorr(df, df$CoupleID, method = 'spearman', bootstrap = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID)
a
a <- wbCorr(df, df$CoupleID, parallel = FALSE)
a <- wbCorr(df, df$CoupleID, parallel = TRUE)
a
a <- wbCorr(df, df$CoupleID, boot = TRUE, parallel = FALSE)
a <- wbCorr(df, df$CoupleID, boot = TRUE, parallel = FALSE)
a
a <- wbCorr(df, df$CoupleID, boot = TRUE, parallel = FALSE)
a <- wbCorr(df, df$CoupleID, boot = TRUE, parallel = TRUE)
library(wbCorr)
a <- wbCorr(df[1:10], df$CoupleID, boot = TRUE, parallel = FALSE)
a
a
a <- wbCorr(df[1:10], df$CoupleID, boot = TRUE, parallel = TRUE)
library(wbCorr)
a <- wbCorr(df[1:10], df$CoupleID, parallel = FALSE)
a
a <- wbCorr(df[1:10], df$CoupleID, parallel = TRUE)
library(wbCorr)
a <- wbCorr(df[1:10], df$CoupleID, parallel = TRUE)
library(wbCorr)
a <- wbCorr(df[1:10], df$CoupleID, parallel = TRUE)
library(wbCorr)
a <- wbCorr(df[1:10], df$CoupleID, parallel = TRUE)
library(wbCorr)
a <- wbCorr(df[1:10], df$CoupleID, parallel = TRUE)
library(wbCorr)
a <- wbCorr(df[1:10], df$CoupleID, parallel = TRUE)
library(wbCorr)
a <- wbCorr(df[1:10], df$CoupleID, parallel = TRUE)
library(wbCorr)
library(wbCorr)
a <- wbCorr(df[1:10], df$CoupleID, parallel = TRUE)
library(wbCorr)
a <- wbCorr(df[1:10], df$CoupleID, parallel = TRUE)
library(wbCorr)
a <- wbCorr(df[1:10], df$CoupleID, parallel = TRUE)
library(wbCorr)
a <- wbCorr(df[1:10], df$CoupleID, parallel = TRUE)
library(wbCorr)
a <- wbCorr(df[1:10], df$CoupleID, parallel = TRUE)
library('wbCorr')
library(wbCorr)
test_data_real_factors <- readRDS("C:/Users/kueng/OneDrive/scripts/01 R-Packages/within-between-correlations/test_data_real_factors.rds")
df <- test_data_real_factors
a <- wbCorr(df, df$CoupleID)
a
a
a@ICC
library(wbCorr)
a <- wbCorr(df, df$CoupleID)
library(wbCorr)
a <- wbCorr(df, df$CoupleID)
a
library(wbCorr)
a <- wbCorr(df, df$CoupleID)
a
get_ICC(a)
library(wbCorr)
a <- wbCorr(df, df$CoupleID)
a
get_ICC(a)
get_table(a)
library(wbCorr)
a <- wbCorr(df, df$CoupleID)
get_ICC(a)
?wbCorr
library(wbCorr)
a <- wbCorr(df, df$CoupleID)
test_data_real_factors <- readRDS("C:/Users/kueng/OneDrive/scripts/01 R-Packages/within-between-correlations/test_data_real_factors.rds")
df <- test_data_real_factors
a <- wbCorr(df, df$CoupleID)
a
a
a
get_ICC(a)
?wbCorr
library(wbCorr)
?wbCorr
a <- wbCorr(df, df$CoupleID)
get_ICC(a)
psych::statsBy(df, df$CoupleID)
a <- wbCorr(df, df$CoupleID)
a
psych::statsBy(df, df$CoupleID)
a <- wbCorr(df, df$CoupleID)
a
psych::statsBy(df, df$CoupleID)
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
a
get_ICC(a)
get_table(a)
get_ICCs(a)
summary(a)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
test_data_real_factors <- readRDS("C:/Users/kueng/OneDrive/scripts/01 R-Packages/within-between-correlations/test_data_real_factors.rds")
df <- test_data_real_factors
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
library(wbCorr)
library(wbCorr)
test_data_real_factors <- readRDS("C:/Users/kueng/OneDrive/scripts/01 R-Packages/within-between-correlations/test_data_real_factors.rds")
df <- test_data_real_factors
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
library(wbCorr)
library(wbCorr)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
cluster_name <- CoupleID
cluster_name <- 'CoupleID'
paste0("~ 1 | `", cluster_name, "`")
random <- as.formula(paste0("~ 1 | `", cluster_name, "`"))
random
library(wbCorr)
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
names(df)
colnames(df) <- gsub(" ", "_", colnames(df))
names(df)
nlme::lme(Persuasion_agent ~ 1, data = df, random = ~ 1 | CoupleID)
nlme::lme(Persuasion_agent ~ 1, data = df, random = ~ 1 | CoupleID, na.action = 'na.omit')
nlme::lme(Persuasion_agent ~ 1, data = df, random = ~ 1 | CoupleID, na.action = 'na.omit')
model <- nlme::lme(Persuasion_agent ~ 1, data = df, random = ~ 1 | CoupleID, na.action = 'na.omit')
VarCorr(model)
a <- VarCorr(model)
a
str(a)
a[1,1]
a[1,2]
a[2,1]
library(wbCorr)
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
a <- wbCorr(df, df$CoupleID)
class(a[1,1])
library(wbCorr)
a <- wbCorr(df, df$CoupleID)
library(wbCorr)
a <- wbCorr(df, df$CoupleID)
names(df)
library(wbCorr)
a <- wbCorr(df, df$CoupleID)
library(wbCorr)
a
a
a <- wbCorr(df, df$CoupleID)
a
b <- psych::statsBy(df, df$CoupleID)
b$ICC1
get_ICC(a)
b <- psych::statsBy(df, df$CoupleID)
a <- wbCorr(df, df$CoupleID)
a
library(wbCorr)
a <- wbCorr(df, df$CoupleID)
a
?VarCorr
library(wbCorr)
library(wbCorr)
a <- wbCorr(df, df$CoupleID)
a
library(wbCorr)
a <- wbCorr(df, df$CoupleID)
warnings()
library(wbCorr)
a <- wbCorr(df, df$CoupleID)
library(wbCorr)
a <- wbCorr(df, df$CoupleID)
library(wbCorr)
a <- wbCorr(df, df$CoupleID)
a
a <- wbCorr(df, df$CoupleID, weighted_between_statistics = TRUE)
a
a <- wbCorr(df, df$CoupleID, bootstrap = TRUE, n=200)
a
packageVersion('wbCorr')
a <- wbCorr(df, df$CoupleID, bootstrap = TRUE)
a
a <- wbCorr(df, df$CoupleID, bootstrap = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, bootstrap = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, bootstrap = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, bootstrap = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, bootstrap = TRUE)
library(wbCorr)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, bootstrap = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, bootstrap = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, bootstrap = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, bootstrap = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, bootstrap = TRUE)
library(wbCorr)
a <- wbCorr(df, df$CoupleID, bootstrap = TRUE)
a
data("simdat_intensive_longitudinal")
df <- simdat_intensive_longitudinal
df
df_c <- bmlm::isolate(df, by = 'participantID', value = c('day'))
df_c
cor(df_c$day, df_c$day_cw)
test_data_real_factors <- readRDS("C:/Users/kueng/OneDrive/scripts/01 R-Packages/within-between-correlations/test_data_real_factors.rds")
df <- test_data_real_factors
names(df)
df <- gsub(df, ' ', "_", df)
df <- gsub(colnames(df), ' ', "_", colnames(df)
)
df
df
df <- test_data_real_factors
library(bmlm)
df_c <- bmlm::isolate(df, by = 'participantID', value = c('Day', 'Weekend (no = 0; yes = 1)', 'Age agent (years)'))
df_c <- bmlm::isolate(df, by = 'CoupleID', value = c('Day', 'Weekend (no = 0; yes = 1)', 'Age agent (years)'))
df_c
cor(df_c, use = 'pairwise.complete.obs')
cor(df_c[is.numeric(df_c)], use = 'pairwise.complete.obs')
df_c$Day
df$Day
df_c <- bmlm::isolate(df, by = 'CoupleID', value = c('Day', 'Weekend (no = 0; yes = 1)', 'Age agent (years)'), which = 'both')
df_c
df_c$Day
df_c$Day_cw
df_c$Day_cb
df_c$`Age agent (years)`
df_c$`Age agent (years)_cb`
df_c$`Age agent (years)_cw`
df_c$`Gender target (female = 0; male = 1)`
df_c$Gender <- as.factor(df$`Gender agent (female = 0; male = 1)`)
df_c <- isolate(df_c, by = df_c$CoupleID, value = 'Gender', which = 'both')
df_c <- isolate(df_c, by = df_c$CoupleID, value = 'Gender', which = 'both')
df_c$Gender <- as.numeric(df_c$Gender)
df_c <- isolate(df_c, by = df_c$CoupleID, value = 'Gender', which = 'both')
df_c <- isolate(df_c, by = df_c$CoupleID, value = 'Gender', which = 'both')
rlang::last_trace()
df_c <- isolate(df_c, by = 'CoupleID', value = 'Gender', which = 'both')
df_c
df_c$Gender
df_c$Gender_cw
df_c$Gender_cb
cor(df_c$Gender_cb, df_c$`Persuasion agent`, use = "pairwise.complete.obs")
cor(df_c$Gender, df_c$`Persuasion agent`, use = "pairwise.complete.obs")
library(wbCorr)
a <- wbCorr(df, df$CoupleID, method = 'auto')
a
get_table(a)$within
get_table(a)$within[100:]
get_table(a)$within[100:,]
get_table(a)$within[100:200,]
library(wbCorr)
a <- wbCorr(df, df$CoupleID, method = 'auto')
a
get_table(a)
get_table(a)
get_table(a)$method
get_table(a)$within$method
unique(get_table(a)$within$method)
names(df)
df_demo <- c('CoupleID', 'Day', 'Persuasion agent', 'Pressure agent', 'Positive affect agent', 'MVPA target (in minutes)', 'Intervention group (no = 0; yes = 1)',
'Age target(years)')
df_demo <- c('CoupleID', 'Day', 'Persuasion agent', 'Pressure agent', 'MVPA target (in minutes)', 'Intervention group (no = 0; yes = 1)', 'Age target(years)')
df_demo
df_fun <- df[df_demo]
df_demo <- c('CoupleID', 'Day', 'Persuasion agent', 'Pressure agent', 'MVPA target (in minutes)', 'Intervention group (no = 0; yes = 1)', 'Age target (years)')
df_fun <- df[df_demo]
df_fun
saveRDS(df_fun, path = 'C:\\Users\\kueng\\OneDrive\\scripts\\01 R-Packages\\within-between-correlations\\df_fun.rds')
?saveRDS
saveRDS(df_fun, file = 'C:\\Users\\kueng\\OneDrive\\scripts\\01 R-Packages\\within-between-correlations\\df_fun.rds')
a <- wbCorr(df_fun, 'CoupleID', method = 'auto')
a
library(wbCorr)
a <- wbCorr(df_fun, 'CoupleID', method = 'auto')
a
library(wbCorr)
a <- wbCorr(df_fun, 'CoupleID', method = 'auto')
a <- wbCorr(df_fun, 'CoupleID', method = 'auto')
library(wbCorr)
a <- wbCorr(df_fun, 'CoupleID', method = 'auto')
a
library(wbCorr)
library(wbCorr)
a <- wbCorr(df_fun, 'CoupleID', method = 'auto')
library(wbCorr)
a <- wbCorr(df_fun, 'CoupleID', method = 'auto')
library(wbCorr)
a <- wbCorr(df_fun, 'CoupleID', method = 'auto')
warnings()
a
a
a <- wbCorr(df, 'CoupleID', method = 'auto')
a
summary(a)
get_tables(a)
get_ICC(a)
library(wbCorr)
library(wbCorr)
a <- wbCorr(df, 'CoupleID', method = 'auto')
a
library(wbCorr)
a <- wbCorr(df, 'CoupleID', method = 'auto')
library(wbCorr)
library(wbCorr)
a <- wbCorr(df, 'CoupleID', method = 'auto')
library(wbCorr)
a <- wbCorr(df, 'CoupleID', method = 'auto')
a
a <- wbCorr(df, 'CoupleID', method = 'pearson')
a
a <- wbCorr(df, 'CoupleID', method = 'spearman')
a
a <- wbCorr(df_fun, 'CoupleID', method = 'spearman-jackknife')
a
a <- wbCorr(df_fun, 'CoupleID', method = 'spearman-jackknife', bootstrap = TRUE)
a <- wbCorr(df_fun, 'CoupleID', method = 'spearman', bootstrap = TRUE)
library(wbCorr)
a <- wbCorr(df_fun, 'CoupleID', method = 'spearman', bootstrap = TRUE)
a
get_table(a)$within
get_table(a)$within
get_table(a)$between
a <- wbCorr(df_fun, 'CoupleID', method = 'auto', bootstrap = TRUE)
a
a <- wbCorr(df_fun, 'CoupleID', method = 'auto')
a
a <- wbCorr(df_fun, 'CoupleID', method = 'auto')
a
a <- wbCorr(df_fun, 'CoupleID', method = 'pearson')
a
library(wbCorr)
library(wbCorr)
a <- wbCorr(df_fun, 'CoupleID', method = 'pearson')
a
a <- wbCorr(df_fun, 'CoupleID', method = 'auto')
a
a <- wbCorr(df_fun, 'CoupleID', method = 'auto')
a
a <- wbCorr(df_fun, 'CoupleID', method = 'auto')
library(wbCorr)
a <- wbCorr(df_fun, 'CoupleID', method = 'auto')
a
a <- wbCorr(df_fun, 'CoupleID', method = 'pearson')
a
library(wbCorr)
a <- wbCorr(df_fun, 'CoupleID', method = 'pearson')
a
a <- wbCorr(df_fun, 'CoupleID', method = 'auto')
a
class(df_fun$Day)
df_fun$Day <- as.factor(df_fun$Day, ordered = TRUE)
?as.factor()
df_fun$Day <- as.factor(df_fun$Day, ordered = TRUE)
?as.factor()
df_fun$Day <- as.ordered(df_fun$Day, ordered = TRUE)
df_fun$Day <- as.ordered(df_fun$Day)
a <- wbCorr(df_fun, 'CoupleID', method = 'pearson')
a
a <- wbCorr(df_fun, 'CoupleID', method = 'auto')
a
get_table(a)$between
get_table(a)$between
class(df_fun$`Intervention group (no = 0; yes = 1)`)
class(df)
a <- wbCorr(df_fun, 'CoupleID', method = 'pearson')
a
get_table(a)$between
cors <- wbCorr(data,
cluster = cluster
)
create_files <- function(data, cluster, type) {
# spearman
cors <- wbCorr(data,
cluster = cluster,
method = 'spearman',
)
saveRDS(get_table(cors), file = paste0('tests/testthat/testdata/exp_tables_spearman_',type,'.rds'))
saveRDS(summary(cors), file = paste0('tests/testthat/testdata/exp_matrices_spearman_',type,'.rds'))
# pearson
cors <- wbCorr(data,
cluster = cluster
)
saveRDS(get_table(cors), file = paste0('tests/testthat/testdata/exp_tables_pearson_',type,'.rds'))
saveRDS(summary(cors), file = paste0('tests/testthat/testdata/exp_matrices_pearson_',type,'.rds'))
# Jackknife
cors <- wbCorr(data,
cluster = cluster,
method = 'spearman-jackknife',
)
saveRDS(get_table(cors), file = paste0('tests/testthat/testdata/exp_tables_jackknife_',type,'.rds'))
saveRDS(summary(cors), file = paste0('tests/testthat/testdata/exp_matrices_jackknife_',type,'.rds'))
# boot spearman
cors <- wbCorr(data,
cluster = cluster,
method = 'spearman',
boot = TRUE
)
saveRDS(get_table(cors), file = paste0('tests/testthat/testdata/exp_tables_spearman_boot_',type,'.rds'))
# boot auto
cors <- wbCorr(data,
cluster = cluster,
method = 'auto',
boot = TRUE
)
saveRDS(get_table(cors), file = paste0('tests/testthat/testdata/exp_tables_auto_boot_',type,'.rds'))
# boot auto with 99% CI
cors <- wbCorr(data,
cluster = cluster,
method = 'auto',
boot = TRUE,
confidence_level = 0.99
)
saveRDS(get_table(cors), file = paste0('tests/testthat/testdata/exp_tables_auto99_boot_',type,'.rds'))
}
source("C:/Users/kueng/OneDrive/scripts/01 R-Packages/wbCorr/tests/testthat/Create_Tests.R", echo=TRUE)
source("C:/Users/kueng/OneDrive/scripts/01 R-Packages/wbCorr/tests/testthat/Create_Tests.R", echo=TRUE)
warnings()
